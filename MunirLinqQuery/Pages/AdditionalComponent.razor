@page "/Q1"
@using MunirLinqQuery.Data
@inject StudentDbContext _db


<h3>First Additional Query Solution</h3>

<table>
    <tbody>
        @foreach (var item in students)
        {
        <td>@item.sname</td>
        <td>@item.marks</td>
        }
    </tbody>
</table>

@code {
    List<Student> students = new List<Student>();

    protected override void OnInitialized()
    {
        LoadQuery();
    }

    void LoadQuery()
    {
        var studentsNoMarks = _db.std
     .Where(s => s.enrolls.Any(e => e.classes.Any(c => c.students.Contains(s))) && s.marks == 0)
     .Select(s => s.sname);

        // Result
        foreach (var studentName in studentsNoMarks)
        {
            Console.WriteLine($"Student Name: {studentName}");
        }
    }
}
